<!-- Copyright Amazon.com,
Inc. or its affiliates. All Rights Reserved. -->
<!-- SPDX-License-Identifier: MIT-0 -->
<html>
  <head>
    <link
      href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
      }

      #map {
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="map" />
    <script src="https://unpkg.com/maplibre-gl"></script>
    <script src="https://unpkg.com/amazon-location-helpers"></script>
    <script>
      async function initializeMap() {
        // Initialize the map
        const map = await AmazonLocation.createMap(
          {
            // Cognito Identity Pool ID
            identityPoolId: "<Cognito Identity Pool ID>",
          },
          {
            container: "map",
            // Initial center point
            center: [-86.81120882261392, 33.51532106711009],
            // Initial zoom level
            zoom: 10,
            // Amazon Location Service's Map name
            style: "map-with-raster-overlay-example",
            hash: true,
          }
        );

        map.on("load", function () {
          map.addSource("weathermap-data", {
            type: "raster",
            // use the tiles option to specify a WMS tile source URL
            // https://maplibre.org/maplibre-style-spec/sources/
            tiles: [
            'https://mesonet.agron.iastate.edu/cache/tile.py/1.0.0/ridge::BMX-N0Q-0/{z}/{x}/{y}.png'],
            tileSize: 256,
          });
          map.addLayer({
            id: "weathermap-layer",
            type: "raster",
            source: "weathermap-data",
            paint: {},
          });
        });

        // Add navigation controls
        map.addControl(new maplibregl.NavigationControl(), "top-left");
      }

      initializeMap();
    </script>
  </body>
</html>